# clip-preview Specification

## Purpose
定義片段預覽功能的規範。此功能允許使用者從片段列表或編輯器中快速跳轉影片播放器到指定的時間點，並開始播放，以便快速驗證剪輯位置。

## ADDED Requirements

### Requirement: 片段預覽觸發
系統 SHALL 在每個剪輯片段的操作項目中提供「預覽」功能。

#### Scenario: 從片段列表觸發預覽
- **WHEN** 使用者點擊片段列表中的「預覽」按鈕
- **THEN** 影片播放器 SHALL 跳轉到該片段的「開始時間」
- **AND** 影片播放器 SHALL 開始播放

### Requirement: 精確時間跳轉
系統 SHALL 支援跳轉到影片的任意精確時間點（包含毫秒）。

#### Scenario: 跳轉到指定秒數
- **WHEN** 系統接收到跳轉至 12.34 秒的請求
- **THEN** 影片播放器內部 `video.currentTime` 被設定為 12.34
- **AND** 播放器 UI 同步更新當前時間顯示

### Requirement: 播放器外部控制協定
系統 SHALL 透過狀態管理提供一個標準的介面，讓非播放器元件能夠請求播放行為。

#### Scenario: 外部請求播放
- **WHEN** 外部元件發送「播放」請求
- **THEN** 如果影片已載入且未在播放，播放器開始播放
- **AND** 如果已在播放則保持不變

### Requirement: 預覽模式狀態顯示
系統 SHALL 在影片播放器上方顯示當前預覽的片段名稱，或在正常模式下顯示「原影片」。

#### Scenario: 顯示片段名稱
- **WHEN** 使用者點擊片段預覽按鈕
- **THEN** 影片播放器上方 SHALL 顯示該片段的名稱
- **AND** 標題區域清晰可見且不遮擋影片內容

#### Scenario: 顯示原影片標題
- **WHEN** 使用者未預覽任何片段，或點擊「返回原影片」按鈕
- **THEN** 影片播放器上方 SHALL 顯示「原影片」文字

### Requirement: 返回原影片功能
系統 SHALL 提供一個按鈕，讓使用者能夠從預覽模式切換回完整影片播放模式。

#### Scenario: 切換回原影片
- **WHEN** 使用者點擊「返回原影片」按鈕
- **THEN** 清除當前預覽片段狀態
- **AND** 影片播放器標題 SHALL 更新為「原影片」
- **AND** 影片播放器 SHALL 保持當前播放位置（不重置到 0）
- **AND** 如果正在播放則繼續播放，如果已暫停則保持暫停
