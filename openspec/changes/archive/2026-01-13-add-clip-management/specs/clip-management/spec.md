## ADDED Requirements

### Requirement: 片段資料結構
系統 SHALL 定義剪輯片段的資料結構，包含唯一識別碼、名稱、開始時間和結束時間。

#### Scenario: 片段資料結構定義
- **WHEN** 檢視共享型別定義
- **THEN** 存在 ClipSegment 介面
- **AND** 包含 id 欄位（字串，唯一識別碼）
- **AND** 包含 name 欄位（字串，片段名稱）
- **AND** 包含 startTime 欄位（數字，開始時間，單位：秒）
- **AND** 包含 endTime 欄位（數字，結束時間，單位：秒）

### Requirement: 片段狀態管理
系統 SHALL 使用狀態管理儲存和管理所有剪輯片段。

#### Scenario: 片段狀態儲存
- **WHEN** 系統初始化
- **THEN** 片段列表為空陣列
- **AND** 可以透過狀態管理存取片段列表

#### Scenario: 新增片段到狀態
- **WHEN** 使用者新增片段
- **THEN** 片段被加入到狀態管理的片段列表
- **AND** 片段具有唯一的 ID

#### Scenario: 更新片段狀態
- **WHEN** 使用者編輯片段
- **THEN** 狀態管理中的對應片段被更新
- **AND** 其他片段保持不變

#### Scenario: 刪除片段
- **WHEN** 使用者刪除片段
- **THEN** 片段從狀態管理的片段列表中移除
- **AND** 其他片段保持不變

### Requirement: 新增片段功能
系統 SHALL 提供介面讓使用者新增剪輯片段。

#### Scenario: 開啟新增片段表單
- **WHEN** 使用者點擊新增片段按鈕
- **THEN** 顯示片段編輯表單
- **AND** 表單欄位為空（或預設值）

#### Scenario: 成功新增片段
- **WHEN** 使用者填寫有效的片段資訊並儲存
- **THEN** 片段被加入到片段列表
- **AND** 表單關閉
- **AND** 片段列表顯示新片段

#### Scenario: 新增片段驗證失敗
- **WHEN** 使用者填寫無效的片段資訊（如開始時間 >= 結束時間）
- **THEN** 顯示驗證錯誤訊息
- **AND** 不新增片段
- **AND** 表單保持開啟狀態

### Requirement: 編輯片段功能
系統 SHALL 提供介面讓使用者編輯現有的剪輯片段。

#### Scenario: 開啟編輯表單
- **WHEN** 使用者點擊片段的編輯按鈕
- **THEN** 顯示片段編輯表單
- **AND** 表單預填當前片段的資訊

#### Scenario: 成功更新片段
- **WHEN** 使用者修改片段資訊並儲存
- **THEN** 片段資訊在狀態管理中被更新
- **AND** 片段列表顯示更新後的資訊
- **AND** 表單關閉

#### Scenario: 編輯驗證失敗
- **WHEN** 使用者修改為無效的片段資訊
- **THEN** 顯示驗證錯誤訊息
- **AND** 不更新片段
- **AND** 表單保持開啟狀態

### Requirement: 刪除片段功能
系統 SHALL 提供介面讓使用者刪除剪輯片段。

#### Scenario: 刪除片段
- **WHEN** 使用者點擊片段的刪除按鈕
- **THEN** 顯示確認對話框（可選）或直接刪除
- **AND** 片段從片段列表中移除
- **AND** 片段列表更新顯示

### Requirement: 片段驗證
系統 SHALL 驗證片段資訊的有效性。

#### Scenario: 時間範圍驗證
- **WHEN** 使用者輸入開始時間和結束時間
- **THEN** 系統驗證開始時間 < 結束時間
- **AND** 如果驗證失敗，顯示錯誤訊息

#### Scenario: 影片長度驗證
- **WHEN** 使用者輸入片段時間範圍
- **THEN** 系統驗證時間範圍在影片長度內
- **AND** 如果超出影片長度，顯示錯誤訊息

#### Scenario: 時間格式驗證
- **WHEN** 使用者輸入時間
- **THEN** 系統支援多種格式（秒數、分:秒、時:分:秒）
- **AND** 無效格式顯示錯誤訊息

### Requirement: 片段列表顯示
系統 SHALL 在 UI 中顯示所有剪輯片段。

#### Scenario: 顯示片段列表
- **WHEN** 存在一個或多個片段
- **THEN** 列表顯示所有片段
- **AND** 每個片段顯示名稱、開始時間、結束時間
- **AND** 每個片段顯示編輯和刪除按鈕

#### Scenario: 空列表顯示
- **WHEN** 沒有片段
- **THEN** 顯示空狀態訊息或提示
- **AND** 顯示新增片段按鈕

#### Scenario: 時間格式化顯示
- **WHEN** 片段列表顯示時間
- **THEN** 時間格式化為易讀格式（分:秒 或 時:分:秒）
- **AND** 根據時長選擇適當的格式

### Requirement: 片段與影片狀態同步
系統 SHALL 確保片段狀態與影片狀態保持一致。

#### Scenario: 清除影片時清除片段
- **WHEN** 使用者清除當前載入的影片
- **THEN** 所有片段也被清除
- **AND** 片段列表恢復為空
