# VedioClip 打包指南

## 前置需求

1. 確保已安裝所有依賴：
   ```bash
   npm install
   ```

2. 確保專案可以正常建置：
   ```bash
   npm run build
   ```

## 打包步驟

### 1. 建置專案
首先建置專案（如果還沒建置）：
```bash
npm run build
```

### 2. 打包成 EXE
執行打包命令：
```bash
npm run package
```

這會使用 `electron-builder` 將應用程式打包成 Windows 安裝程式。

### 3. 輸出位置
打包完成後，安裝程式會位於：
```
release/VedioClip Setup 0.1.0.exe
```

或者未打包的應用程式在：
```
release/win-unpacked/
```

### 4. 測試打包結果
您可以直接執行 `release/VedioClip Setup 0.1.0.exe` 來安裝應用程式，或者執行 `release/win-unpacked/VedioClip.exe` 來直接運行（無需安裝）。

## 分發方式

### 方式一：安裝程式（推薦）
分發 `release/VedioClip Setup 0.1.0.exe` 給使用者，他們可以：
- 執行安裝程式
- 選擇安裝位置
- 建立桌面和開始選單捷徑

### 方式二：免安裝版本（Portable）
如果要分發免安裝版本，**必須包含整個 `win-unpacked` 資料夾**：

1. **打包成 ZIP**（推薦）：
   - 將整個 `release/win-unpacked` 資料夾壓縮成 ZIP 檔案
   - 例如：`VedioClip-0.1.0-portable.zip`
   - 使用者解壓縮後執行 `VedioClip.exe` 即可

2. **直接分發資料夾**：
   - 將整個 `win-unpacked` 資料夾複製給使用者
   - 使用者執行資料夾內的 `VedioClip.exe` 即可

**重要：不能只提供 `VedioClip.exe`！**

`VedioClip.exe` 依賴於以下檔案，缺少任何一個都會導致無法運行：
- `resources/` 資料夾（包含應用程式和 FFmpeg）
- 各種 DLL 檔案（Electron 運行時）
- `locales/` 資料夾（語言檔案）
- 其他必要的系統檔案

### 免安裝版本包含的檔案
```
win-unpacked/
├── VedioClip.exe          # 主執行檔
├── resources/              # 應用程式資源
│   ├── app.asar           # 應用程式主程式
│   ├── ffmpeg.exe         # FFmpeg 執行檔
│   └── ffprobe.exe        # FFprobe 執行檔
├── locales/               # 語言檔案
├── *.dll                  # Electron 運行時 DLL
└── 其他必要檔案...
```

## 打包配置說明

### 輸出格式
- **NSIS 安裝程式**：會產生一個 `.exe` 安裝程式
- 安裝程式支援：
  - 自訂安裝目錄
  - 建立桌面捷徑
  - 建立開始選單捷徑

### 包含的檔案
打包會自動包含：
- 應用程式主程式（Electron + React）
- FFmpeg 和 FFprobe 二進位檔案
- 所有必要的依賴套件

### 系統需求
- Windows 10 或更高版本
- 64 位元系統（x64）

## 疑難排解

### 打包失敗
如果打包失敗，請檢查：
1. 是否已執行 `npm run build` 且成功
2. 是否已安裝所有依賴（`npm install`）
3. 檢查 `package.json` 中的 `build` 配置是否正確

### FFmpeg 找不到
如果打包後的應用程式無法找到 FFmpeg：
- 檢查 `src/main/video-processor.ts` 中的路徑設定
- 確認 `package.json` 中的 `extraFiles` 配置正確

### 檔案大小
打包後的安裝程式可能會比較大（約 100-200 MB），因為包含了：
- Electron 運行時環境
- FFmpeg 和 FFprobe
- 所有 Node.js 依賴

## 進階配置

### 自訂圖示
如果要使用自訂應用程式圖示：
1. 準備一個 `.ico` 檔案（建議 256x256 或更大）
2. 將檔案放在 `build/icon.ico`
3. 重新打包

### 修改安裝程式名稱
在 `package.json` 的 `build` 區段中修改：
```json
{
  "build": {
    "productName": "您的應用程式名稱"
  }
}
```

### 其他打包選項
更多配置選項請參考 [electron-builder 文件](https://www.electron.build/)
